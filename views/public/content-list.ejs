<%- include('../partials/public-header') %>

<main class="page">
  <section class="section">
    <h1 class="section-title"><%= listTitle %></h1>
    <p class="section-subtitle"><%= type === 'portfolio' ? '성과 중심 포트폴리오 사례를 확인하세요.' : '운영 서비스 구성과 제공 범위를 확인하세요.' %></p>

    <div class="square-grid">
      <% if (!items.length) { %>
        <div class="empty">아직 공개된 콘텐츠가 없습니다.</div>
      <% } %>

      <% items.forEach((item) => { %>
        <a class="square-link" href="/<%= type %>/<%= item.slug %>">
          <div class="square-media">
            <% const thumbSrc = item.thumbnail_path || 'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=1200&q=80'; %>
            <% const isVideo = /\.(mp4|webm|ogg)$/i.test(thumbSrc || ''); %>
            <% if (isVideo) { %>
              <video muted loop autoplay playsinline preload="metadata">
                <source src="<%= thumbSrc %>" />
              </video>
            <% } else { %>
              <img src="<%= thumbSrc %>" alt="<%= item.title %>" />
            <% } %>
          </div>
          <div class="square-overlay">
            <p class="square-title"><%= item.title %></p>
            <p class="square-summary"><%= item.summary || '상세 페이지에서 전체 내용을 확인하세요.' %></p>
          </div>
        </a>
      <% }) %>
    </div>
  </section>
</main>

<%- include('../partials/public-footer') %>
